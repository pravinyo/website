<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="Comprehensive Guide to Caching in Spring Boot with Redis" /><meta name="author" content="Pravin Tripathi" /><meta property="og:locale" content="en" /><meta name="description" content="Introduction" /><meta property="og:description" content="Introduction" /><link rel="canonical" href="https://pravin.dev/posts/caching-in-springboot-with-redis/" /><meta property="og:url" content="https://pravin.dev/posts/caching-in-springboot-with-redis/" /><meta property="og:site_name" content="Pravin on Software" /><meta property="og:image" content="https://pravin.dev/header.png" /><meta property="og:image:height" content="900" /><meta property="og:image:width" content="1600" /><meta property="og:image:alt" content="Generated using Copilot" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2024-09-04T00:00:00+05:30" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://pravin.dev/header.png" /><meta name="twitter:image:alt" content="Generated using Copilot" /><meta property="twitter:title" content="Comprehensive Guide to Caching in Spring Boot with Redis" /><meta name="twitter:site" content="@pravin_yo" /><meta name="twitter:creator" content="@pravin_yo" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Pravin Tripathi","url":"https://www.linkedin.com/in/pravin-r-tripathi"},"dateModified":"2024-09-04T00:00:00+05:30","datePublished":"2024-09-04T00:00:00+05:30","description":"Introduction","headline":"Comprehensive Guide to Caching in Spring Boot with Redis","image":{"width":1600,"height":900,"alt":"Generated using Copilot","url":"https://pravin.dev/header.png","@type":"imageObject"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://pravin.dev/posts/caching-in-springboot-with-redis/"},"url":"https://pravin.dev/posts/caching-in-springboot-with-redis/"}</script><title>Comprehensive Guide to Caching in Spring Boot with Redis | Pravin on Software</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Pravin on Software"><meta name="application-name" content="Pravin on Software"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/img/avatar.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Pravin on Software</a></div><div class="site-subtitle font-italic">My Learning and Experiments in Software Engineering</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/pravinyo" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/pravin_yo" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['pravinyo12','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Comprehensive Guide to Caching in Spring Boot with Redis</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>Comprehensive Guide to Caching in Spring Boot with Redis</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1725388200" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Sep 4, 2024 </em> </span><div class="mt-3 mb-3"> <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1600 900'%3E%3C/svg%3E" data-src="/assets/img/caching-in-springboot-with-redis/header.png" class="preview-img bg" alt="Generated using Copilot" width="1600" height="900" data-proofer-ignore><figcaption class="pt-2 pb-2">Generated using Copilot</figcaption></div><div class="d-flex justify-content-between"> <span> By <em> <a href="https://www.linkedin.com/in/pravin-r-tripathi">Pravin Tripathi</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2238 words"> <em>12 min</em> read</span></div></div></div><div class="post-content"><h2 id="introduction"><span class="mr-2"><strong>Introduction</strong></span><a href="#introduction" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Caching is a crucial optimization technique that enhances application performance by reducing database load and response time. <strong>Spring Boot</strong> provides built-in support for caching via the <strong>Spring Cache Abstraction</strong>, which allows developers to integrate various cache providers, including <strong>Redis</strong>.</p><p>In this article, we will cover:</p><ol><li><strong>Caching in Spring Boot</strong> – key interfaces, annotations, and underlying design patterns.<li><strong>Configuration required to enable caching</strong>.<li><strong>Different eviction policies supported by Redis in Spring Boot</strong>.<li><strong>Default eviction policy used by Redis</strong>.<li><strong>Key generation strategy and its default behavior</strong>.<li><strong>How cached data is stored in Redis and how to query it via terminal</strong>.<li><strong>Data structures supported by Redis and how to use them in Spring</strong>.<li><strong>When to use different Redis data types for caching.</strong><li><strong>Real-world use cases and best practices for caching in Spring Boot with Redis.</strong></ol><hr /><h2 id="1-caching-in-spring-boot-interfaces-annotations--design-pattern"><span class="mr-2"><strong>1. Caching in Spring Boot: Interfaces, Annotations &amp; Design Pattern</strong></span><a href="#1-caching-in-spring-boot-interfaces-annotations--design-pattern" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Spring Boot provides the <strong>Spring Cache Abstraction</strong>, which enables caching without binding the application to a specific caching solution.</p><h3 id="key-interfaces-used-in-spring-boot-caching"><span class="mr-2"><strong>Key Interfaces Used in Spring Boot Caching</strong></span><a href="#key-interfaces-used-in-spring-boot-caching" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li><strong><code class="language-plaintext highlighter-rouge">CacheManager</code></strong> – Manages different cache regions.<li><strong><code class="language-plaintext highlighter-rouge">Cache</code></strong> – Represents an individual cache region.<li><strong><code class="language-plaintext highlighter-rouge">CacheResolver</code></strong> – Determines which cache should be used.<li><strong><code class="language-plaintext highlighter-rouge">CacheWriter</code></strong> – Defines how cache entries are written.</ul><h3 id="common-caching-annotations-and-their-meaning"><span class="mr-2"><strong>Common Caching Annotations and Their Meaning</strong></span><a href="#common-caching-annotations-and-their-meaning" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="table-wrapper"><table><thead><tr><th>Annotation<th>Purpose<tbody><tr><td><code class="language-plaintext highlighter-rouge">@Cacheable(value = "products", key = "#id")</code><td>Caches method output. If key exists, returns cached data.<tr><td><code class="language-plaintext highlighter-rouge">@CachePut(value = "products", key = "#id")</code><td>Updates cache and ensures method execution.<tr><td><code class="language-plaintext highlighter-rouge">@CacheEvict(value = "products", key = "#id")</code><td>Removes a specific cache entry.<tr><td><code class="language-plaintext highlighter-rouge">@Caching</code><td>Groups multiple caching operations.<tr><td><code class="language-plaintext highlighter-rouge">@CacheConfig</code><td>Specifies common cache settings at the class level.<tr><td><code class="language-plaintext highlighter-rouge">@EnableCaching</code><td>Enables Spring’s caching mechanism.</table></div><h3 id="behind-the-scenes-design-pattern-used"><span class="mr-2"><strong>Behind the Scenes: Design Pattern Used</strong></span><a href="#behind-the-scenes-design-pattern-used" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Spring Boot’s caching abstraction follows the <strong>Proxy Design Pattern</strong>. When a method annotated with <code class="language-plaintext highlighter-rouge">@Cacheable</code> is called, Spring first checks if the result exists in the cache. If it does, the method execution is skipped, and the cached result is returned. Otherwise, the method executes, and the result is cached.</p><pre><code class="language-mermaid">graph TD;
    A[Method Call] --&gt;|Check Cache| B{Cache Available?};
    B -- Yes --&gt; C[Return Cached Data];
    B -- No --&gt; D[Execute Method];
    D --&gt; E[Store Result in Cache];
    E --&gt; C;
</code></pre><hr /><h2 id="2-enabling-caching-in-spring-boot"><span class="mr-2"><strong>2. Enabling Caching in Spring Boot</strong></span><a href="#2-enabling-caching-in-spring-boot" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>To enable caching in a Spring Boot application, follow these steps:</p><h3 id="step-1-add-dependencies-spring--redis"><span class="mr-2"><strong>Step 1: Add Dependencies (Spring + Redis)</strong></span><a href="#step-1-add-dependencies-spring--redis" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><strong>Maven (pom.xml):</strong></p><div class="language-xml highlighter-rouge"><div class="code-header"> <span data-label-text="XML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-cache<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-data-redis<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></table></code></div></div><p><strong>application.properties:</strong></p><div class="language-properties highlighter-rouge"><div class="code-header"> <span data-label-text="Properties"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="py">spring.redis.host</span><span class="p">=</span><span class="s">localhost</span>
<span class="py">spring.redis.port</span><span class="p">=</span><span class="s">6379</span>
</pre></table></code></div></div><h3 id="step-2-enable-caching-in-configuration-class"><span class="mr-2"><strong>Step 2: Enable Caching in Configuration Class</strong></span><a href="#step-2-enable-caching-in-configuration-class" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre><span class="nd">@Configuration</span>
<span class="nd">@EnableCaching</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CacheConfig</span> <span class="o">{</span>

    <span class="nd">@Bean</span>
    <span class="nd">@Primary</span>
    <span class="kd">public</span> <span class="nc">RedisCacheConfiguration</span> <span class="nf">defaultCacheConfig</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">StringRedisSerializer</span> <span class="n">keySerializer</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringRedisSerializer</span><span class="o">();</span>
        <span class="nc">Jackson2JsonRedisSerializer</span><span class="o">&lt;</span><span class="nc">Object</span><span class="o">&gt;</span> <span class="n">valueSerializer</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Jackson2JsonRedisSerializer</span><span class="o">&lt;&gt;(</span><span class="nc">Object</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

        <span class="k">return</span> <span class="nc">RedisCacheConfiguration</span><span class="o">.</span><span class="na">defaultCacheConfig</span><span class="o">()</span>
                <span class="o">.</span><span class="na">entryTtl</span><span class="o">(</span><span class="nc">Duration</span><span class="o">.</span><span class="na">ofMinutes</span><span class="o">(</span><span class="mi">2</span><span class="o">))</span> <span class="c1">// Set cache expiration</span>
                <span class="o">.</span><span class="na">serializeKeysWith</span><span class="o">(</span><span class="nc">RedisSerializationContext</span><span class="o">.</span><span class="na">SerializationPair</span><span class="o">.</span><span class="na">fromSerializer</span><span class="o">(</span><span class="n">keySerializer</span><span class="o">))</span>
                <span class="o">.</span><span class="na">serializeValuesWith</span><span class="o">(</span><span class="nc">RedisSerializationContext</span><span class="o">.</span><span class="na">SerializationPair</span><span class="o">.</span><span class="na">fromSerializer</span><span class="o">(</span><span class="n">valueSerializer</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><hr /><h2 id="3-different-eviction-policies-in-spring-boot-with-redis"><span class="mr-2"><strong>3. Different Eviction Policies in Spring Boot with Redis</strong></span><a href="#3-different-eviction-policies-in-spring-boot-with-redis" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Eviction policies determine how data is removed when memory is full. Spring Boot allows configuring different strategies:</p><div class="table-wrapper"><table><thead><tr><th>Eviction Policy<th>Description<tbody><tr><td><strong>LRU (Least Recently Used)</strong><td>Removes least accessed items when memory is full.<tr><td><strong>LFU (Least Frequently Used)</strong><td>Removes least frequently used items first.<tr><td><strong>FIFO (First In, First Out)</strong><td>Evicts oldest stored items first.<tr><td><strong>TTL-Based Eviction</strong><td>Removes data after a set time (Time-To-Live).</table></div><hr /><h2 id="4-default-eviction-policy-in-redis"><span class="mr-2"><strong>4. Default Eviction Policy in Redis</strong></span><a href="#4-default-eviction-policy-in-redis" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>By default, Redis uses <strong>noeviction</strong> for eviction. To check the policy:</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>127.0.0.1:6379&gt; CONFIG GET maxmemory-policy
1<span class="o">)</span> <span class="s2">"maxmemory-policy"</span>
2<span class="o">)</span> <span class="s2">"noeviction"</span>
</pre></table></code></div></div><p>To change the policy:</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre>127.0.0.1:6379&gt; CONFIG SET maxmemory-policy allkeys-lru
OK

127.0.0.1:6379&gt; CONFIG GET maxmemory-policy
1<span class="o">)</span> <span class="s2">"maxmemory-policy"</span>
2<span class="o">)</span> <span class="s2">"allkeys-lru"</span>
</pre></table></code></div></div><hr /><h2 id="5-key-generation-strategy-in-spring-boot"><span class="mr-2"><strong>5. Key Generation Strategy in Spring Boot</strong></span><a href="#5-key-generation-strategy-in-spring-boot" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Spring Boot uses a <strong>Simple Key Generator</strong> by default, which constructs keys as follows:</p><ul><li><strong>Single argument:</strong> Uses the argument value as the key.<li><strong>Multiple arguments:</strong> Uses an array containing all arguments.<li><strong>No arguments:</strong> Uses a default key <code class="language-plaintext highlighter-rouge">SimpleKey.EMPTY</code>.</ul><h3 id="example-custom-key-generator"><span class="mr-2"><strong>Example: Custom Key Generator</strong></span><a href="#example-custom-key-generator" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="nd">@Bean</span>
<span class="kd">public</span> <span class="nc">KeyGenerator</span> <span class="nf">customKeyGenerator</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="o">(</span><span class="n">target</span><span class="o">,</span> <span class="n">method</span><span class="o">,</span> <span class="n">params</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">method</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">"::"</span> <span class="o">+</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">params</span><span class="o">);</span>
<span class="o">}</span>
</pre></table></code></div></div><hr /><h2 id="6-using-string-and-hash-data-types-in-redis-with-spring"><span class="mr-2"><strong>6. Using String and Hash Data Types in Redis with Spring</strong></span><a href="#6-using-string-and-hash-data-types-in-redis-with-spring" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Redis provides multiple data structures for caching, with <code class="language-plaintext highlighter-rouge">String</code> and <code class="language-plaintext highlighter-rouge">Hash</code> being two of the most commonly used. <code class="language-plaintext highlighter-rouge">String</code> is often used for simple key-value caching, while <code class="language-plaintext highlighter-rouge">Hash</code> is beneficial for storing structured objects and updating specific fields efficiently.</p><h3 id="using-string-data-type-with-annotations"><span class="mr-2"><strong>Using String Data Type with Annotations</strong></span><a href="#using-string-data-type-with-annotations" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>The <code class="language-plaintext highlighter-rouge">@Cacheable</code> annotation in Spring enables automatic caching of method return values. The following example demonstrates how to cache product details using the <code class="language-plaintext highlighter-rouge">String</code> data type in Redis:</p><h4 id="product-service-implementation"><span class="mr-2"><strong>Product Service Implementation</strong></span><a href="#product-service-implementation" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre><span class="nd">@Service</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ProductService</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">ProductRepository</span> <span class="n">productRepository</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">ProductService</span><span class="o">(</span><span class="kd">final</span> <span class="nc">ProductRepository</span> <span class="n">productRepository</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">productRepository</span> <span class="o">=</span> <span class="n">productRepository</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Cacheable</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">"productCache"</span><span class="o">,</span> <span class="n">key</span> <span class="o">=</span> <span class="s">"#id"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">ProductDto</span> <span class="nf">get</span><span class="o">(</span><span class="kd">final</span> <span class="nc">Long</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">productRepository</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="n">id</span><span class="o">)</span>
                <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">product</span> <span class="o">-&gt;</span> <span class="n">mapToDTO</span><span class="o">(</span><span class="n">product</span><span class="o">,</span> <span class="k">new</span> <span class="nc">ProductDto</span><span class="o">()))</span>
                <span class="o">.</span><span class="na">orElseThrow</span><span class="o">(</span><span class="nl">NotFoundException:</span><span class="o">:</span><span class="k">new</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><h4 id="product-controller"><span class="mr-2"><strong>Product Controller</strong></span><a href="#product-controller" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre><span class="nd">@CrossOrigin</span><span class="o">(</span><span class="n">origins</span> <span class="o">=</span> <span class="s">"*"</span><span class="o">,</span> <span class="n">maxAge</span> <span class="o">=</span> <span class="mi">3600</span><span class="o">)</span>
<span class="nd">@RestController</span>
<span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">"/api/products"</span><span class="o">,</span> <span class="n">produces</span> <span class="o">=</span> <span class="nc">MediaType</span><span class="o">.</span><span class="na">APPLICATION_JSON_VALUE</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ProductController</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">ProductService</span> <span class="n">productService</span><span class="o">;</span>
    
    <span class="kd">public</span> <span class="nf">ProductController</span><span class="o">(</span><span class="nc">ProductService</span> <span class="n">productService</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">productService</span> <span class="o">=</span> <span class="n">productService</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"/{id}"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">ResponseEntity</span><span class="o">&lt;</span><span class="nc">ProductDto</span><span class="o">&gt;</span> <span class="nf">getProduct</span><span class="o">(</span><span class="nd">@PathVariable</span> <span class="kd">final</span> <span class="nc">Long</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="nc">ResponseEntity</span><span class="o">.</span><span class="na">ok</span><span class="o">(</span><span class="n">productService</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">id</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><h4 id="adding-a-product-to-the-database"><span class="mr-2"><strong>Adding a Product to the Database</strong></span><a href="#adding-a-product-to-the-database" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre>curl <span class="nt">--request</span> POST <span class="se">\</span>
  <span class="nt">--url</span> http://localhost:8080/api/products <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'User-Agent: insomnia/10.2.0'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
	"id" : 1,
	"name": "iphone",
	"category": "phone",
	"availableItems": 12,
	"price": "50000",
	"description": "2025 model",
	"manufacturer": "Apple Inc"
}'</span>
</pre></table></code></div></div><h4 id="retrieving-a-product"><span class="mr-2"><strong>Retrieving a Product</strong></span><a href="#retrieving-a-product" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>When fetching a product, the service first checks Redis. If the entry is found in the cache, it is returned directly; otherwise, the database is queried, and the result is stored in the cache before returning it.</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>curl <span class="nt">--request</span> GET <span class="nt">--url</span> http://localhost:8080/api/products/1
</pre></table></code></div></div><h4 id="checking-redis-cache"><span class="mr-2"><strong>Checking Redis Cache</strong></span><a href="#checking-redis-cache" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>127.0.0.1:6379&gt; GET productCache::1
<span class="s2">"{</span><span class="se">\"</span><span class="s2">id</span><span class="se">\"</span><span class="s2">:1,</span><span class="se">\"</span><span class="s2">name</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">iphone</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">category</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">phone</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">price</span><span class="se">\"</span><span class="s2">:50000.0,</span><span class="se">\"</span><span class="s2">description</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">2025 model</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">manufacturer</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">Apple Inc</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">availableItems</span><span class="se">\"</span><span class="s2">:12}"</span>
</pre></table></code></div></div><h4 id="after-expiry"><span class="mr-2"><strong>After Expiry</strong></span><a href="#after-expiry" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>127.0.0.1:6379&gt; GET productCache::1
<span class="o">(</span>nil<span class="o">)</span>
</pre></table></code></div></div><h3 id="using-hash-data-type-programmatically"><span class="mr-2"><strong>Using Hash Data Type Programmatically</strong></span><a href="#using-hash-data-type-programmatically" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>The <code class="language-plaintext highlighter-rouge">Hash</code> data type in Redis is useful for efficiently storing structured objects. It allows updating specific fields without replacing the entire object, making it ideal for frequently updated records.</p><h4 id="setting-up-redistemplate-bean"><span class="mr-2"><strong>Setting Up RedisTemplate Bean</strong></span><a href="#setting-up-redistemplate-bean" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Modify <code class="language-plaintext highlighter-rouge">CacheConfig.java</code> to include a Redis template:</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre><td class="rouge-code"><pre>    <span class="nd">@Bean</span>
    <span class="kd">public</span> <span class="nc">RedisTemplate</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="nf">redisTemplate</span><span class="o">(</span><span class="nc">RedisConnectionFactory</span> <span class="n">connectionFactory</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">RedisTemplate</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">template</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">RedisTemplate</span><span class="o">&lt;&gt;();</span>
        <span class="n">template</span><span class="o">.</span><span class="na">setConnectionFactory</span><span class="o">(</span><span class="n">connectionFactory</span><span class="o">);</span>

        <span class="c1">// JSON Serializer</span>
        <span class="nc">Jackson2JsonRedisSerializer</span><span class="o">&lt;</span><span class="nc">Object</span><span class="o">&gt;</span> <span class="n">jsonSerializer</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Jackson2JsonRedisSerializer</span><span class="o">&lt;&gt;(</span><span class="nc">Object</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

        <span class="c1">// Set Key and HashKey as String</span>
        <span class="n">template</span><span class="o">.</span><span class="na">setKeySerializer</span><span class="o">(</span><span class="k">new</span> <span class="nc">StringRedisSerializer</span><span class="o">());</span>
        <span class="n">template</span><span class="o">.</span><span class="na">setHashKeySerializer</span><span class="o">(</span><span class="k">new</span> <span class="nc">StringRedisSerializer</span><span class="o">());</span>

        <span class="c1">// Value and HashValue as JSON</span>
        <span class="n">template</span><span class="o">.</span><span class="na">setValueSerializer</span><span class="o">(</span><span class="n">jsonSerializer</span><span class="o">);</span>
        <span class="n">template</span><span class="o">.</span><span class="na">setHashValueSerializer</span><span class="o">(</span><span class="n">jsonSerializer</span><span class="o">);</span>
        <span class="n">template</span><span class="o">.</span><span class="na">afterPropertiesSet</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">template</span><span class="o">;</span>
    <span class="o">}</span>
</pre></table></code></div></div><h4 id="modifying-productservice-to-store-data-as-hash"><span class="mr-2"><strong>Modifying ProductService to Store Data as Hash</strong></span><a href="#modifying-productservice-to-store-data-as-hash" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
</pre><td class="rouge-code"><pre><span class="nd">@Service</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ProductService</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">RedisTemplate</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">redisTemplate</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">ObjectMapper</span> <span class="n">objectMapper</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">ProductRepository</span> <span class="n">productRepository</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">ProductService</span><span class="o">(</span><span class="nc">RedisTemplate</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">redisTemplate</span><span class="o">,</span> <span class="nc">ObjectMapper</span> <span class="n">objectMapper</span><span class="o">,</span> <span class="nc">ProductRepository</span> <span class="n">productRepository</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">redisTemplate</span> <span class="o">=</span> <span class="n">redisTemplate</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">objectMapper</span> <span class="o">=</span> <span class="n">objectMapper</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">productRepository</span> <span class="o">=</span> <span class="n">productRepository</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">ProductDto</span> <span class="nf">getModified</span><span class="o">(</span><span class="kd">final</span> <span class="nc">Long</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">HashOperations</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">hashOps</span> <span class="o">=</span> <span class="n">redisTemplate</span><span class="o">.</span><span class="na">opsForHash</span><span class="o">();</span>
        <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">Object</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">productMap</span> <span class="o">=</span> <span class="n">hashOps</span><span class="o">.</span><span class="na">entries</span><span class="o">(</span><span class="s">"product:"</span> <span class="o">+</span> <span class="n">id</span><span class="o">);</span>

        <span class="k">if</span> <span class="o">(</span><span class="n">productMap</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">())</span> <span class="o">{</span>
            <span class="nc">ProductDto</span> <span class="n">productDto</span> <span class="o">=</span> <span class="n">productRepository</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="n">id</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">product</span> <span class="o">-&gt;</span> <span class="n">mapToDTO</span><span class="o">(</span><span class="n">product</span><span class="o">,</span> <span class="k">new</span> <span class="nc">ProductDto</span><span class="o">()))</span>
                    <span class="o">.</span><span class="na">orElseThrow</span><span class="o">(</span><span class="nl">NotFoundException:</span><span class="o">:</span><span class="k">new</span><span class="o">);</span>
            <span class="n">cacheProduct</span><span class="o">(</span><span class="n">productDto</span><span class="o">);</span>
            <span class="k">return</span> <span class="n">productDto</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="k">return</span> <span class="n">objectMapper</span><span class="o">.</span><span class="na">convertValue</span><span class="o">(</span><span class="n">productMap</span><span class="o">,</span> <span class="nc">ProductDto</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">Long</span> <span class="nf">create</span><span class="o">(</span><span class="kd">final</span> <span class="nc">ProductDto</span> <span class="n">productDTO</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">final</span> <span class="nc">Product</span> <span class="n">product</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Product</span><span class="o">();</span>
        <span class="n">mapToEntity</span><span class="o">(</span><span class="n">productDTO</span><span class="o">,</span> <span class="n">product</span><span class="o">);</span>
        <span class="nc">Product</span> <span class="n">saved</span> <span class="o">=</span> <span class="n">productRepository</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">product</span><span class="o">);</span>
        <span class="n">cacheProduct</span><span class="o">(</span><span class="n">productDTO</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">saved</span><span class="o">.</span><span class="na">getId</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">cacheProduct</span><span class="o">(</span><span class="nc">ProductDto</span> <span class="n">product</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">HashOperations</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">hashOps</span> <span class="o">=</span> <span class="n">redisTemplate</span><span class="o">.</span><span class="na">opsForHash</span><span class="o">();</span>
        <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">productMap</span> <span class="o">=</span> <span class="n">objectMapper</span><span class="o">.</span><span class="na">convertValue</span><span class="o">(</span><span class="n">product</span><span class="o">,</span> <span class="nc">Map</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
        <span class="n">hashOps</span><span class="o">.</span><span class="na">putAll</span><span class="o">(</span><span class="s">"product:"</span> <span class="o">+</span> <span class="n">product</span><span class="o">.</span><span class="na">getId</span><span class="o">(),</span> <span class="n">productMap</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><hr /><h3 id="updating-stock-availability-in-cache-using-order-service"><span class="mr-2"><strong>Updating Stock Availability in Cache Using Order Service</strong></span><a href="#updating-stock-availability-in-cache-using-order-service" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>To keep stock availability updated, an <code class="language-plaintext highlighter-rouge">OrderService</code> modifies only the <code class="language-plaintext highlighter-rouge">availableItems</code> field in the Redis cache without rewriting the entire product object.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
</pre><td class="rouge-code"><pre><span class="nd">@Service</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">OrderService</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">RedisTemplate</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">redisTemplate</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">OrderRepository</span> <span class="n">orderRepository</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">ProductRepository</span> <span class="n">productRepository</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">OrderService</span><span class="o">(</span><span class="nc">RedisTemplate</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">redisTemplate</span><span class="o">,</span> <span class="kd">final</span> <span class="nc">OrderRepository</span> <span class="n">orderRepository</span><span class="o">,</span> <span class="kd">final</span> <span class="nc">UserRepository</span> <span class="n">userRepository</span><span class="o">,</span> <span class="kd">final</span> <span class="nc">ProductRepository</span> <span class="n">productRepository</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">redisTemplate</span> <span class="o">=</span> <span class="n">redisTemplate</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">orderRepository</span> <span class="o">=</span> <span class="n">orderRepository</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">productRepository</span> <span class="o">=</span> <span class="n">productRepository</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">OrderDto</span> <span class="nf">get</span><span class="o">(</span><span class="kd">final</span> <span class="nc">Long</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">orderRepository</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="n">id</span><span class="o">)</span>
                <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">order</span> <span class="o">-&gt;</span> <span class="n">mapToDTO</span><span class="o">(</span><span class="n">order</span><span class="o">,</span> <span class="k">new</span> <span class="nc">OrderDto</span><span class="o">()))</span>
                <span class="o">.</span><span class="na">orElseThrow</span><span class="o">(</span><span class="nl">NotFoundException:</span><span class="o">:</span><span class="k">new</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">Long</span> <span class="nf">create</span><span class="o">(</span><span class="kd">final</span> <span class="nc">OrderDto</span> <span class="n">orderDTO</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">final</span> <span class="nc">Order</span> <span class="n">order</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Order</span><span class="o">();</span>
        <span class="n">mapToEntity</span><span class="o">(</span><span class="n">orderDTO</span><span class="o">,</span> <span class="n">order</span><span class="o">);</span>
        <span class="nc">Order</span> <span class="n">saved</span> <span class="o">=</span>  <span class="n">orderRepository</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">order</span><span class="o">);</span>
        <span class="n">saved</span><span class="o">.</span><span class="na">getLineItems</span><span class="o">().</span><span class="na">forEach</span><span class="o">(</span><span class="k">this</span><span class="o">::</span><span class="n">updateProductAvailability</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">saved</span><span class="o">.</span><span class="na">getId</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">updateProductAvailability</span><span class="o">(</span><span class="nc">LineItem</span> <span class="n">lineItem</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Long</span> <span class="n">productId</span> <span class="o">=</span> <span class="n">lineItem</span><span class="o">.</span><span class="na">getProduct</span><span class="o">().</span><span class="na">getId</span><span class="o">();</span>
        <span class="nc">Integer</span> <span class="n">quantity</span> <span class="o">=</span> <span class="n">lineItem</span><span class="o">.</span><span class="na">getQuantity</span><span class="o">();</span>
        <span class="nc">HashOperations</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">hashOps</span> <span class="o">=</span> <span class="n">redisTemplate</span><span class="o">.</span><span class="na">opsForHash</span><span class="o">();</span>

        <span class="nc">Long</span> <span class="n">newStock</span> <span class="o">=</span> <span class="n">hashOps</span><span class="o">.</span><span class="na">increment</span><span class="o">(</span><span class="s">"product:"</span> <span class="o">+</span> <span class="n">productId</span><span class="o">,</span> <span class="s">"availableItems"</span><span class="o">,</span> <span class="o">-</span><span class="n">quantity</span><span class="o">);</span>
        <span class="n">hashOps</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"product:"</span> <span class="o">+</span> <span class="n">productId</span><span class="o">,</span> <span class="s">"lastUpdate"</span><span class="o">,</span> <span class="nc">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">());</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">newStock</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">hashOps</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"product:"</span> <span class="o">+</span> <span class="n">productId</span><span class="o">,</span> <span class="s">"availableItems"</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span> <span class="c1">// Reset to zero</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalArgumentException</span><span class="o">(</span><span class="s">"Stock is insufficient!"</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><hr /><h3 id="final-redis-structure"><span class="mr-2"><strong>Final Redis Structure</strong></span><a href="#final-redis-structure" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><h4 id="after-adding-a-product"><span class="mr-2"><strong>After Adding a Product</strong></span><a href="#after-adding-a-product" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre><td class="rouge-code"><pre>127.0.0.1:6379&gt; HGETALL product:1
 1<span class="o">)</span> <span class="s2">"id"</span>
 2<span class="o">)</span> <span class="s2">"1"</span>
 3<span class="o">)</span> <span class="s2">"name"</span>
 4<span class="o">)</span> <span class="s2">"</span><span class="se">\"</span><span class="s2">iphone</span><span class="se">\"</span><span class="s2">"</span>
 5<span class="o">)</span> <span class="s2">"category"</span>
 6<span class="o">)</span> <span class="s2">"</span><span class="se">\"</span><span class="s2">phone</span><span class="se">\"</span><span class="s2">"</span>
 7<span class="o">)</span> <span class="s2">"price"</span>
 8<span class="o">)</span> <span class="s2">"50000.0"</span>
 9<span class="o">)</span> <span class="s2">"description"</span>
10<span class="o">)</span> <span class="s2">"</span><span class="se">\"</span><span class="s2">2025 model</span><span class="se">\"</span><span class="s2">"</span>
11<span class="o">)</span> <span class="s2">"manufacturer"</span>
12<span class="o">)</span> <span class="s2">"</span><span class="se">\"</span><span class="s2">Apple Inc</span><span class="se">\"</span><span class="s2">"</span>
13<span class="o">)</span> <span class="s2">"availableItems"</span>
14<span class="o">)</span> <span class="s2">"12"</span>
15<span class="o">)</span> <span class="s2">"lineItems"</span>
16<span class="o">)</span> <span class="s2">""</span>
17<span class="o">)</span> <span class="s2">"dateCreated"</span>
18<span class="o">)</span> <span class="s2">""</span>
19<span class="o">)</span> <span class="s2">"lastUpdated"</span>
20<span class="o">)</span> <span class="s2">""</span>
127.0.0.1:6379&gt;
</pre></table></code></div></div><h4 id="after-placing-an-order"><span class="mr-2"><strong>After Placing an Order</strong></span><a href="#after-placing-an-order" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Once we place order for this product, we are saving in the DB and also updating cache for available count quit as only specific field is updated.</p><p><strong>API curl:</strong></p><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre>curl <span class="nt">--request</span> POST <span class="se">\</span>
  <span class="nt">--url</span> http://localhost:8080/api/orders <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Correlation-Id: ALPHA-123'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'User-Agent: insomnia/10.2.0'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
	"id" : 1,
	"userId": 1,
	"lineItems": [
		{
			"productId": 1,
			"quantity": 4
		}
	]
}'</span>
</pre></table></code></div></div><p><strong>Redis Terminal</strong></p><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
</pre><td class="rouge-code"><pre>127.0.0.1:6379&gt; HGETALL product:1
 1<span class="o">)</span> <span class="s2">"id"</span>
 2<span class="o">)</span> <span class="s2">"1"</span>
 3<span class="o">)</span> <span class="s2">"name"</span>
 4<span class="o">)</span> <span class="s2">"</span><span class="se">\"</span><span class="s2">iphone</span><span class="se">\"</span><span class="s2">"</span>
 5<span class="o">)</span> <span class="s2">"category"</span>
 6<span class="o">)</span> <span class="s2">"</span><span class="se">\"</span><span class="s2">phone</span><span class="se">\"</span><span class="s2">"</span>
 7<span class="o">)</span> <span class="s2">"price"</span>
 8<span class="o">)</span> <span class="s2">"50000.0"</span>
 9<span class="o">)</span> <span class="s2">"description"</span>
10<span class="o">)</span> <span class="s2">"</span><span class="se">\"</span><span class="s2">2025 model</span><span class="se">\"</span><span class="s2">"</span>
11<span class="o">)</span> <span class="s2">"manufacturer"</span>
12<span class="o">)</span> <span class="s2">"</span><span class="se">\"</span><span class="s2">Apple Inc</span><span class="se">\"</span><span class="s2">"</span>
13<span class="o">)</span> <span class="s2">"availableItems"</span>
14<span class="o">)</span> <span class="s2">"8"</span>
15<span class="o">)</span> <span class="s2">"lineItems"</span>
16<span class="o">)</span> <span class="s2">""</span>
17<span class="o">)</span> <span class="s2">"dateCreated"</span>
18<span class="o">)</span> <span class="s2">""</span>
19<span class="o">)</span> <span class="s2">"lastUpdated"</span>
20<span class="o">)</span> <span class="s2">""</span>
21<span class="o">)</span> <span class="s2">"lastUpdate"</span>
22<span class="o">)</span> <span class="s2">"1741976096813"</span>
127.0.0.1:6379&gt;
</pre></table></code></div></div><hr /><h2 id="7-supported-redis-data-structures--usage-in-spring"><span class="mr-2"><strong>7. Supported Redis Data Structures &amp; Usage in Spring</strong></span><a href="#7-supported-redis-data-structures--usage-in-spring" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><pre><code class="language-mermaid">graph TD;
    A["Spring"] --&gt;|"Simple Key-Value"| B["@Cacheable"];
    A --&gt;|"Hash Map"| C["RedisTemplate.opsForHash"];
    A --&gt;|"List"| D["RedisTemplate.opsForList"];
    A --&gt;|"Set"| E["RedisTemplate.opsForSet"];
    A --&gt;|"Sorted Set (ZSet)"| F["RedisTemplate.opsForZSet"];
</code></pre><hr /><h2 id="8-when-to-use-which-data-type"><span class="mr-2"><strong>8. When to Use Which Data Type?</strong></span><a href="#8-when-to-use-which-data-type" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="string-data-type"><span class="mr-2"><strong>String Data Type</strong></span><a href="#string-data-type" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li><strong>Use Case:</strong> Simple key-value pairs where the value is a single object or a serialized object.<li><strong>Example:</strong> Caching user sessions, configuration settings, or individual product details.</ul><h3 id="hash-data-type"><span class="mr-2"><strong>Hash Data Type</strong></span><a href="#hash-data-type" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li><strong>Use Case:</strong> Storing objects with multiple fields, where each field can be accessed individually.<li><strong>Example:</strong> Caching user profiles, where each user has multiple attributes like name, email, and address.</ul><h3 id="list-data-type"><span class="mr-2"><strong>List Data Type</strong></span><a href="#list-data-type" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li><strong>Use Case:</strong> Storing ordered collections of items, where the order of insertion is important.<li><strong>Example:</strong> Caching recent activities or logs.</ul><h3 id="set-data-type"><span class="mr-2"><strong>Set Data Type</strong></span><a href="#set-data-type" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li><strong>Use Case:</strong> Storing unique items where the order does not matter.<li><strong>Example:</strong> Caching unique tags or categories.</ul><h3 id="sorted-set-zset-data-type"><span class="mr-2"><strong>Sorted Set (ZSet) Data Type</strong></span><a href="#sorted-set-zset-data-type" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li><strong>Use Case:</strong> Storing ordered collections of items with associated scores, where items can be retrieved based on their scores.<li><strong>Example:</strong> Caching leaderboard data or ranked items.</ul><hr /><h2 id="9-real-world-use-cases-and-best-practices"><span class="mr-2"><strong>9. Real-World Use Cases and Best Practices</strong></span><a href="#9-real-world-use-cases-and-best-practices" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="real-world-use-cases"><span class="mr-2"><strong>Real-World Use Cases</strong></span><a href="#real-world-use-cases" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ol><li><strong>E-commerce Applications:</strong><ul><li><strong>Product Catalog:</strong> Cache product details to reduce database load during high traffic.<li><strong>Shopping Cart:</strong> Use Redis to store temporary shopping cart data.</ul><li><strong>Social Media Platforms:</strong><ul><li><strong>User Feeds:</strong> Cache user feeds to improve read performance.<li><strong>Notifications:</strong> Store and retrieve user notifications efficiently.</ul><li><strong>Gaming Applications:</strong><ul><li><strong>Leaderboards:</strong> Use Redis Sorted Sets to maintain and display leaderboard data.<li><strong>Session Management:</strong> Cache user sessions to ensure quick access and scalability.</ul></ol><h3 id="best-practices"><span class="mr-2"><strong>Best Practices</strong></span><a href="#best-practices" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ol><li><strong>Cache Invalidation:</strong><ul><li>Implement proper cache invalidation strategies to ensure data consistency.<li>Use <code class="language-plaintext highlighter-rouge">@CacheEvict</code> to remove stale data from the cache.</ul><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="nd">@Service</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ProductService</span> <span class="o">{</span>

    <span class="nd">@CacheEvict</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">"productCache"</span><span class="o">,</span> <span class="n">key</span> <span class="o">=</span> <span class="s">"#id"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">evictProductById</span><span class="o">(</span><span class="nc">Long</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// This method will remove the cached product with the given id</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><li><strong>Cache Expiration:</strong><ul><li>Set appropriate TTL (Time-To-Live) values to automatically expire stale data.<li>Use Redis’ TTL-based eviction policy to manage cache expiration.</ul><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="nd">@Bean</span>
<span class="kd">public</span> <span class="nc">RedisCacheManager</span> <span class="nf">cacheManager</span><span class="o">(</span><span class="nc">RedisConnectionFactory</span> <span class="n">factory</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">RedisCacheConfiguration</span> <span class="n">config</span> <span class="o">=</span> <span class="nc">RedisCacheConfiguration</span><span class="o">.</span><span class="na">defaultCacheConfig</span><span class="o">()</span>
        <span class="o">.</span><span class="na">entryTtl</span><span class="o">(</span><span class="nc">Duration</span><span class="o">.</span><span class="na">ofMinutes</span><span class="o">(</span><span class="mi">10</span><span class="o">));</span> <span class="c1">// Set TTL to 10 minutes</span>
    <span class="k">return</span> <span class="nc">RedisCacheManager</span><span class="o">.</span><span class="na">builder</span><span class="o">(</span><span class="n">factory</span><span class="o">)</span>
        <span class="o">.</span><span class="na">cacheDefaults</span><span class="o">(</span><span class="n">config</span><span class="o">)</span>
        <span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="o">}</span>
</pre></table></code></div></div><li><strong>Monitoring and Logging:</strong><ul><li>Monitor cache hit and miss ratios to optimize cache usage.<li>Log cache operations to diagnose and troubleshoot issues.</ul><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="nd">@Service</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ProductService</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">Logger</span> <span class="n">logger</span> <span class="o">=</span> <span class="nc">LoggerFactory</span><span class="o">.</span><span class="na">getLogger</span><span class="o">(</span><span class="nc">ProductService</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

    <span class="nd">@Cacheable</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">"productCache"</span><span class="o">,</span> <span class="n">key</span> <span class="o">=</span> <span class="s">"#id"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">Product</span> <span class="nf">getProductById</span><span class="o">(</span><span class="nc">Long</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">logger</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"Fetching product from database with id: {}"</span><span class="o">,</span> <span class="n">id</span><span class="o">);</span>
        <span class="c1">// Simulate database call</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">Product</span><span class="o">(</span><span class="n">id</span><span class="o">,</span> <span class="s">"Laptop"</span><span class="o">,</span> <span class="mi">1200</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><li><strong>Scalability:</strong><ul><li>Use Redis clustering to distribute cache data across multiple nodes for scalability.<li>Implement cache sharding to handle large datasets efficiently.</ul><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="nd">@Bean</span>
<span class="kd">public</span> <span class="nc">RedisConnectionFactory</span> <span class="nf">redisConnectionFactory</span><span class="o">()</span> <span class="o">{</span>
    <span class="nc">RedisClusterConfiguration</span> <span class="n">clusterConfig</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">RedisClusterConfiguration</span><span class="o">();</span>
    <span class="n">clusterConfig</span><span class="o">.</span><span class="na">clusterNode</span><span class="o">(</span><span class="s">"127.0.0.1"</span><span class="o">,</span> <span class="mi">6379</span><span class="o">);</span>
    <span class="n">clusterConfig</span><span class="o">.</span><span class="na">clusterNode</span><span class="o">(</span><span class="s">"127.0.0.1"</span><span class="o">,</span> <span class="mi">6380</span><span class="o">);</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">JedisConnectionFactory</span><span class="o">(</span><span class="n">clusterConfig</span><span class="o">);</span>
<span class="o">}</span>
</pre></table></code></div></div></ol><hr /><h2 id="conclusion"><span class="mr-2"><strong>Conclusion</strong></span><a href="#conclusion" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Caching is a powerful technique to enhance the performance of Spring Boot applications. By leveraging Redis as a cache provider, developers can achieve significant improvements in response times and database load. This guide has covered the essential aspects of caching in Spring Boot with Redis, including configuration, eviction policies, key generation, and data structures. By following best practices and understanding real-world use cases, you can effectively implement caching in your applications to deliver a seamless user experience.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/blogging/'>Blogging</a>, <a href='/categories/article/'>Article</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/softwareengineering/" class="post-tag no-text-decoration" >softwareengineering</a> <a href="/tags/backenddevelopment/" class="post-tag no-text-decoration" >backenddevelopment</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Comprehensive+Guide+to+Caching+in+Spring+Boot+with+Redis+-+Pravin+on+Software&url=https%3A%2F%2Fpravin.dev%2Fposts%2Fcaching-in-springboot-with-redis%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Comprehensive+Guide+to+Caching+in+Spring+Boot+with+Redis+-+Pravin+on+Software&u=https%3A%2F%2Fpravin.dev%2Fposts%2Fcaching-in-springboot-with-redis%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fpravin.dev%2Fposts%2Fcaching-in-springboot-with-redis%2F&text=Comprehensive+Guide+to+Caching+in+Spring+Boot+with+Redis+-+Pravin+on+Software" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fpravin.dev%2Fposts%2Fcaching-in-springboot-with-redis%2F" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/database-engineering-fundamental-part-2/">Part 2: Database Engineering Fundamentals</a><li><a href="/posts/system-design-roadmap/">Comprehensive Roadmap for Low-Level and High-Level Design Interview Preparation</a><li><a href="/database-engineering-fundamental-part-5/write-amplification-problem-in-postgresql/">Part 5: Database Engineering Fundamentals: Write Amplification Problem in PostgreSQL</a><li><a href="/database-engineering-fundamental-part-1/">Part 1: Database Engineering Fundamentals</a><li><a href="/database-engineering-fundamental-part-1/database-page/">Part 1: Database Engineering Fundamentals: Database Page</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/backenddevelopment/">backenddevelopment</a> <a class="post-tag" href="/tags/softwareengineering/">softwareengineering</a> <a class="post-tag" href="/tags/database-engineering/">database-engineering</a> <a class="post-tag" href="/tags/design/">design</a> <a class="post-tag" href="/tags/coding/">coding</a> <a class="post-tag" href="/tags/smells/">smells</a> <a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/nodejs/">nodejs</a> <a class="post-tag" href="/tags/softwaredevelopment/">softwaredevelopment</a> <a class="post-tag" href="/tags/aws/">aws</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/database-engineering-fundamental-part-5/write-amplification-problem-in-postgresql/"><div class="card-body"> <em class="small" data-ts="1720157400" data-df="ll" > Jul 5, 2024 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Part 5: Database Engineering Fundamentals: Write Amplification Problem in PostgreSQL</h3><div class="text-muted small"><p> Write Amplification Problem in PostgreSQL Write Amplification Problem in PostgreSQL The Write Amplification Problem (WAP) typically arises in systems using Solid State Drives (SSDs) or other stor...</p></div></div></a></div><div class="card"> <a href="/posts/rate-limiting-using-spring-aop/"><div class="card-body"> <em class="small" data-ts="1722450600" data-df="ll" > Aug 1, 2024 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>How to Implement Rate Limiting in Spring Boot APIs Using Aspect-Oriented Programming (AOP)</h3><div class="text-muted small"><p> Introduction Aspect-Oriented Programming (AOP) is a powerful technique in Spring Boot for separating cross-cutting concerns from the main application logic. One common use case of AOP is implementi...</p></div></div></a></div><div class="card"> <a href="/posts/spring-transactional-annotation/"><div class="card-body"> <em class="small" data-ts="1727721000" data-df="ll" > Oct 1, 2024 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Understanding Spring @Transactional Annotation: A Comprehensive Guide</h3><div class="text-muted small"><p> Spring’s @Transactional annotation is a powerful tool for managing transactions in Java applications. It simplifies transaction management by allowing developers to define transactional behavior de...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/rate-limiting-using-spring-aop/" class="btn btn-outline-primary" prompt="Older"><p>How to Implement Rate Limiting in Spring Boot APIs Using Aspect-Oriented Programming (AOP)</p></a> <a href="/posts/spring-transactional-annotation/" class="btn btn-outline-primary" prompt="Newer"><p>Understanding Spring @Transactional Annotation: A Comprehensive Guide</p></a></div><div id="disqus_thread" class="pt-2 pb-2"><p class="text-center text-muted small"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script type="text/javascript"> var disqus_config = function () { this.page.url = 'https://pravin.dev/posts/caching-in-springboot-with-redis/'; this.page.identifier = '/posts/caching-in-springboot-with-redis/'; }; /* Lazy loading */ var disqus_observer = new IntersectionObserver(function (entries) { if(entries[0].isIntersecting) { (function () { var d = document, s = d.createElement('script'); s.src = 'https://pravin-dev.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); disqus_observer.disconnect(); } }, { threshold: [0] }); disqus_observer.observe(document.querySelector('#disqus_thread')); /* Auto switch theme */ function reloadDisqus() { /* Disqus hasn't been loaded */ if (typeof DISQUS === "undefined") { return; } if (document.readyState == 'complete') { DISQUS.reset({ reload: true, config: disqus_config }); } } const modeToggle = document.querySelector(".mode-toggle"); if (typeof modeToggle !== "undefined") { /* modeToggle.addEventListener('click', reloadDisqus); // not pretty for 'color-scheme' */ window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', reloadDisqus); } </script></div></div><footer class="row pl-3 pr-3"><div class="col-12 d-flex justify-content-between align-items-center text-muted pl-0 pr-0"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://www.linkedin.com/in/pravin-r-tripathi">Pravin Tripathi</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/backenddevelopment/">backenddevelopment</a> <a class="post-tag" href="/tags/softwareengineering/">softwareengineering</a> <a class="post-tag" href="/tags/database-engineering/">database-engineering</a> <a class="post-tag" href="/tags/design/">design</a> <a class="post-tag" href="/tags/coding/">coding</a> <a class="post-tag" href="/tags/smells/">smells</a> <a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/nodejs/">nodejs</a> <a class="post-tag" href="/tags/softwaredevelopment/">softwaredevelopment</a> <a class="post-tag" href="/tags/aws/">aws</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><script src="https://cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js"></script> <script> $(function() { function updateMermaid(event) { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { const mode = event.data.message; if (typeof mermaid === "undefined") { return; } let expectedTheme = (mode === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* Re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } let initTheme = "default"; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches ) ) { initTheme = "dark"; } let mermaidConf = { theme: initTheme /* <default|dark|forest|neutral> */ }; /* Markdown converts to HTML */ $("pre").has("code.language-mermaid").each(function() { let svgCode = $(this).children().html(); $(this).addClass("unloaded"); $(this).after(`<div class=\"mermaid\">${svgCode}</div>`); }); mermaid.initialize(mermaidConf); window.addEventListener("message", updateMermaid); }); </script><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-WP90FFJ6SJ"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-WP90FFJ6SJ'); }); </script>
